<p><% @site.name %></p>

<%= link_to '業務', '#' %>

<p>境界標</p>
<div class='marker field'>
  <%= form_with(model: [@site,@marker], local: true) do |f| %>

    <%# <%= render 'shared/error_messages', model: f.object %>

    <div class="actions">
      <%= f.submit "登録" %>
    </div>

    <div class="field">
      <%= f.label :name %><br />
      <%= f.text_field :name, autofocus: true, autocomplete: "name" %>
    </div>

    <div class="field">
      <%= f.label :name_cad %><br />
      <%= f.text_field :name_cad, autocomplete: "customer" %>
    </div>

    <div class="field">
    <%= f.label :exist %><br />
      <%= f.collection_select(:exist_id, Exist.all, :id, :name) %>
    </div>

    <div class="field">
      <%= f.label :type %><br />
      <%= f.collection_select(:type_id, Type.all, :id, :name) %>
    </div>

    <div slass='fields'>
    <%= f.label :images %><br />
      <%= f.file_field :images, name: 'marker[images][]', id: 'marker_images' %>
    </div>
  <% end %>
</div>

<div class='sample_image'>
  <% @marker.images.each do |image| %>
    <%= image_tag image %>
  <% end %>
</div>

<div class='marker lists'>
  <% if @markers.present? %>
    <% @markers.each do |marker| %>
      <div class='marker list'>
        <div class='marker name'>
          <p>点番    <%= marker.name %></p>
          <p>CAD点番   <%= marker.name_cad %></p>
        </div>
        <div class='marker type'>
          <%= marker.exist.name + marker.type.name %>
        </div>
        <div class='marker images'>
          <div class='marker image'>
            <% marker.images.each do |image| %>
              <%= image_tag image.variant(resize: '200x200') %>
            <% end %>
          </div>
        </div>
        <%= link_to '削除', site_marker_path(marker.site,marker), method: :delete %>
      </div>
    <% end %>
  <% end %>
</div>